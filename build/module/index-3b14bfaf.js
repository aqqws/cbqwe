import{n as t,V as n,I as s,s as e,W as r}from'./index-d31607ce.js';const o=[];function c(n,s=t){let r;const c=new Set;function i(t){if(e(n,t)&&(n=t,r)){const t=!o.length;for(const t of c)t[1](),o.push(t,n);if(t){for(let t=0;t<o.length;t+=2)o[t][0](o[t+1]);o.length=0}}}return{set:i,update:function(t){i(t(n))},subscribe:function(e,o=t){const u=[e,o];return c.add(u),1===c.size&&(r=s(i)||t),e(n),()=>{c.delete(u),0===c.size&&r&&(r(),r=null)}}}}function i(e,o,i){const u=!Array.isArray(e),a=u?[e]:e,f=o.length<2;return l=e=>{let c=!1;const i=[];let l=0,d=t;const b=()=>{if(l)return;d();const n=o(u?i[0]:i,e);f?e(n):d=r(n)?n:t},h=a.map(((t,s)=>n(t,(t=>{i[s]=t,l&=~(1<<s),c&&b()}),(()=>{l|=1<<s}))));return c=!0,b(),()=>{s(h),d(),c=!1}},{subscribe:c(i,l).subscribe};var l}export{i as d,c as w};
